# README

# アプリケーション名
BookTags

# アプリケーション概要
- 読書感想メモを本ごとに記録
- 投稿した感想メモを他ユーザーと共有

# URL
https://booktags.onrender.com

# Basic認証

## ID
admin

## PASS
2222

# テスト用アカウント

## Email
test@gmail.com

## PASS
password

# 利用方法
- ヘッダーの新規登録から新規ユーザー登録ができる
- ログインした状態でヘッダーの読書メモから本の登録と読書メモの投稿ができる
- マイページをクリックすると読んだ本一覧が表示され、プロフィールといいね一覧のボタンが表示される
- プロフィールが登録されていない時、プロフィールが登録できる
- 自分が投稿した感想を含めた感想にいいねができる

# アプリケーションを作成した背景
- 本の感想を投稿できるアプリケーションはあるが、本ごとにリアルタイムで感想を投稿できるアプリケーションはなかったため、同時に複数の本を読む時に感想を管理できるようにしたいと考えた
- リアルタイムの感想は、他人と共有することでより新しい本との出会いになると考え、SNSの形にした

# 洗い出した要件
https://docs.google.com/spreadsheets/d/1WrQPIynsbevj6OoObcz1QNSgtOKBLPNdqdM09cMo-8A/edit#gid=982722306

# 実装した機能
## ユーザー管理機能
### 新規登録機能
- 非ログイン時のヘッダーの新規登録ボタンをクリックするとユーザー登録画面が表示される
- ニックネーム、Eメール、パスワード、確認用パスワードを必須項目として入力できる

### ログイン機能
- 非ログイン時のヘッダーの新規登録ボタンをクリックするとログイン画面が表示される
- Eメール、パスワードを必須項目として入力できる

## 本管理機能
### 登録機能
- 読書メモの投稿ページから「本の登録」のリンクをクリックすると登録フォームが表示される
- タイトル、編著者名を必須項目として入力できる
- 訳者、出版社、出版年、総ページ数、読書開始日を任意項目として入力できる

### 一覧機能
- マイページ、読んだ本をクリックするとログインユーザーの登録した本の一覧が新しい順に表示される
- 読書メモ一覧画面、読書メモ詳細画面の投稿者名をクリックすると投稿者の登録した本の一覧が表示される
- 本のタイトル、編著者名、紐づいている読書メモが新しい順に三つ表示される

### 詳細機能
- 読書メモの一覧画面、読書メモの詳細画面、本の一覧画面の本のタイトルをクリックすると表示される
- 本のタイトル、編著者名が表示される
- 入力されている場合は訳者、出版社、出版年、総ページ数、読書開始日が表示される
- 紐づいた読書メモが新しい順に全て表示される
- 本の登録者のみ編集ボタンと削除ボタンが表示される

### 編集機能
- 詳細ページから編集ボタンをクリックすると、編集フォームが表示される
- タイトル、編著者名、訳者、出版社、出版年、総ページ、読書開始日を編集することができる

### 削除機能
- 詳細ページから削除ボタンをクリックすると、本が削除される

## 読書メモ管理機能
### 投稿機能
- ヘッダーの読書メモをクリックすると投稿フォームが表示される
- 本、読書メモを必須項目として入力できる
- 本は自身が登録した項目をプルダウン式で選択できる
- ページを任意項目として入力できる
- ネタバレ防止のための読書メモの非表示を任意のチェックボックスで選択できる

### 一覧機能
- 全ユーザーの投稿が新しい順に表示される
- 非表示を選択していない投稿は、本のタイトル、編著者名、読書メモ、ページ、投稿者名、いいねボタンが表示される
- 非表示を選択した投稿は、本のタイトル、編著者名、投稿者名と、「読書メモを表示する」の一文といいねボタンが表示される

### 詳細機能
- 読書メモ一覧画面、本一覧画面、本詳細画面の読書メモの本文をクリックすると、詳細画面が表示される
- 本のタイトル、著者名、読書メモ、ページ、投稿者名、投稿日時、いいねボタン、いいね数が表示される
- 読書メモの投稿者のみ編集ボタンと削除ボタンが表示される

### 編集機能
- 詳細ページから編集ボタンをクリックすると、編集フォームが表示される
- 本、読書メモ、ページ、ネタバレ防止のチェックボックスを編集することができる

### 削除機能
- 詳細ページから削除ボタンをクリックすると、読書メモが削除される

## いいね管理機能
### 登録機能
- 読書メモ一覧画面と読書メモ詳細画面からいいねボタンをクリックするといいねボタンの色が変わり登録できる

### 一覧機能
- サイドバーが表示されている時いいねのボタンをクリックすると紐づいたユーザーの一覧が表示される
- 読書メモ一覧機能と同じ内容が新しくいいねをした順に表示される

### 削除機能
- 読書メモ一覧画面、読書メモ詳細画面、いいね一覧画面からいいねをした投稿の色が変わったいいねボタンをクリックすると、いいねが削除される

## プロフィール管理機能
### 登録機能
- 登録ボタンをクリックするとフォーム画面が表示される
- 好きなジャンル、好きな本、好きな著者、生年月日を任意項目として入力できる
- 好きな本、好きな著者は最大三つまで入力できる

### 一覧機能
- サイドバーのプロフィールをクリックすると紐づいたプロフィールの一覧が表示される
- ニックネーム、好きなジャンル、好きな本、好きな著者、生年月日が表示される
- 自身のプロフィールでプロフィールを登録していない時、登録ボタンが表示される
- 自身のプロフィールでプロフィールを登録している時、編集ボタンと削除ボタンが表示される

### 編集機能
- 一覧ページから編集ボタンをクリックすると、編集フォームが表示される
- 好きなジャンル、好きな本、好きな著者、生年月日を編集することができる

### 削除機能
- 一覧ページから削除ボタンをクリックすると、プロフィールが削除される

# 実装予定の機能
本登録機能の際にopenBDを利用した検索機能を実装予定

# データベース設計
[![Image from Gyazo](https://i.gyazo.com/56b1f77c38c6c6f8f6aba5ac6c85a130.png)](https://gyazo.com/56b1f77c38c6c6f8f6aba5ac6c85a130)

# 画面遷移図
[![Image from Gyazo](https://i.gyazo.com/f0c22be79ce4318cd7e29cb831ed71c8.png)](https://gyazo.com/f0c22be79ce4318cd7e29cb831ed71c8)

# 開発環境
Ruby / Ruby on Rails / MySQL / GitHub / Visual Studio Code

# ローカルでの動作方法
1. 「git clone https://github.com/haruna-katuki/booktags.git」をターミナルで実行
2. 「cd booktags」をターミナルで実行
3. 「bundle install」をターミナルで実行
4. 「yarn install」をターミナルで実行
5. 「rails db:migrate:reset」をターミナルで実行

# 工夫したポイント
- 読書メモ投稿の際に非表示ボタンを実装したこと。本や感想の内容によっては、未読のユーザーに見せたくない場合もあると考え、感想本文を一覧では非表示にする機能を実装した。
- サイドバーの表示。マイページ・ユーザーページに属するページにはサイドバーを表示するようにしたため、常にユーザーの情報が渡されるようにした。記述の漏れがないよう、何度も挙動確認を行った。
- クリックできる部分のJavaScriptの適用。ページ遷移できる箇所が多いため、ページ遷移ができる箇所にはJavaScriptを用いてカーソルを合わせると下線が表示されるようにした。

# テーブル設計

## users テーブル

| Column             | Type   | Options                   |
|--------------------|--------|---------------------------|
| nickname           | string | null: false               |
| email              | string | null: false, unique: true |
| encrypted_password | string | null: false               |

### Association

- has_many :books
- has_many :likes
- has_one :profile

## books テーブル

| Column       | Type       | Options                        |
|--------------|------------|--------------------------------|
| title        | string     | null: false                    |
| author       | string     | null: false                    |
| translator   | string     |                                |
| publisher    | string     |                                |
| publish_year | string     |                                |
| total_page   | integer    |                                |
| start_date   | date       |                                |
| user         | references | null: false, foreign_key: true |

### Association

- belongs_to :user
- has_many :posts

## posts テーブル

| Column       | Type       | Options                        |
|--------------|------------|--------------------------------|
| memo         | text       | null: false                    |
| page         | integer    |                                |
| hidden_check | boolean    |                                |
| book         | references | null: false, foreign_key: true |

### Association

- belongs_to :book
- has_many :likes

## profiles テーブル

| Column           | Type       | Options                        |
|------------------|------------|--------------------------------|
| favorite_genre   | string     |                                |
| favorite_book1   | string     |                                |
| favorite_book2   | string     |                                |
| favorite_book3   | string     |                                |
| favorite_author1 | string     |                                |
| favorite_author2 | string     |                                |
| favorite_author3 | string     |                                |
| birth_date       | date       |                                |
| user             | references | null: false, foreign_key: true |

### Association

- belongs_to :user

## likesテーブル

| Column | Type       | Options                        |
|--------|------------|--------------------------------|
| user   | references | null: false, foreign_key: true |
| post   | references | null: false, foreign_key: true |

### Association

- belongs_to :user
- belongs_to :post